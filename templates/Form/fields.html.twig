{% use "bootstrap_3_layout.html.twig" %}

{% block date_widget -%}
    {% if type is not defined or type not in ['file', 'hidden'] %}
        {%- set attr = attr|merge({class: (attr.class|default('') ~ ' widget_datepicker')|trim}) -%}
    {% endif %}
    {{- parent() -}}
{%- endblock date_widget %}

{% block recaptcha_widget %}
    <div {{ block('widget_attributes') }}></div>
{% endblock %}

{% block vich_image_widget %}
    {% if download_uri is defined and download_uri %}
        <a href="{{ asset(download_uri, 'file') }}">
            {% if image_filter_uri is not null %}
                <img class="img-responsive display_inline_block margin_right_15" src="{{ image_filter_uri }}" alt="" />
            {% endif %}
        </a>
    {% endif %}

    {{ form_widget(form.file) }}

    {% if show_download_link and download_uri is defined and download_uri %}
        <a href="{{ asset(download_uri, 'file') }}">{{ 'download'|trans({}, 'VichUploaderBundle') }}</a>
    {% endif %}

    {% if form.delete is defined %}
        <div class="delete-image pull-right">
            {{ form_errors(form.delete) }}
            {{ form_label(form.delete) }}
            {{ form_widget(form.delete) }}
        </div>
    {% endif %}
{% endblock %}


{# Images #}
{% block file_widget %}
    <div class="form-group no_margin">
        {{ block('form_widget') }}
        <input type="text" readonly class="form-control" placeholder="Nouvelle image..." />
    </div>
{% endblock %}

{% block form_row -%}
    {%- set widget_attr = {} -%}
    {%- if help is not empty -%}
        {%- set widget_attr = {attr: {'aria-describedby': id ~"_help"}} -%}
    {%- endif -%}
    <div class="form-group{% if (not compound or force_error|default(false)) and not valid %} has-error{% endif %} {{ widget_class|default('') }}">
        {{- form_label(form) -}}
        {{- form_widget(form, widget_attr) -}}
        {{- form_help(form) -}}
        {{- form_errors(form) -}}
    </div>
{%- endblock form_row %}
