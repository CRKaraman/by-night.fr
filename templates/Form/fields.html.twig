{% use 'form_div_layout.html.twig' with checkbox_widget as base_checkbox_widget %}
{% use "bootstrap_4_layout.html.twig" %}

{% block date_widget -%}
    {% if type is not defined or type not in ['file', 'hidden'] %}
        {%- set attr = attr|merge({class: (attr.class|default('') ~ ' widget_datepicker')|trim}) -%}
    {% endif %}
    {{- parent() -}}
{%- endblock date_widget %}

{% block recaptcha_widget %}
    <div {{ block('widget_attributes') }}></div>
{% endblock %}

{% block vich_image_widget %}
    {% if download_uri is defined and download_uri %}
        <a class="image-gallery" href="{{ download_uri }}">
            {% if image_thumb_uri is not null %}
                <img class="img-fluid loading"
                     src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="
                     {% if image_thumb_params.w is defined %}width="{{ image_thumb_params.w }}"{% endif %}
                     {% if image_thumb_params.h is defined %}height="{{ image_thumb_params.h }}"{% endif %}
                     data-src="{{ image_thumb_uri }}"
                     data-srcset="{{ image_thumb_uri_retina }} 2x"
                     alt="" />
            {% endif %}
        </a>
    {% endif %}

    {{ form_widget(form.file) }}

    {% if form.delete is defined %}
        <div class="delete-image">
            {{ form_row(form.delete) }}
        </div>
    {% endif %}
{% endblock %}


{% block checkbox_row %}
    {{ form_errors(form) }}
    <div class="checkbox">
        <label>
            {{ block('base_checkbox_widget') }}
            {{ translation_domain is same as(false) ? label : label|trans(label_translation_parameters, translation_domain) }}
        </label>
    </div>
{% endblock %}

{# Images #}
{% block file_widget %}
    <div class="custom-file">
        {{ block('form_widget') }}
        <label class="custom-file-label" for="{{ form.vars.id }}">
            <i class="fa fa-upload"></i>
            Nouvelle image...
        </label>
    </div>
{% endblock %}

{% block form_row -%}
    {%- set widget_attr = {} -%}
    {%- if help is not empty -%}
        {%- set widget_attr = {attr: {'aria-describedby': id ~"_help"}} -%}
    {%- endif -%}
    <div class="form-group{% if (not compound or force_error|default(false)) and not valid %} has-error{% endif %} {{ widget_class|default('') }}">
        {{- form_label(form) -}}
        {{- form_widget(form, widget_attr) -}}
        {{- form_help(form) -}}
        {{- form_errors(form) -}}
    </div>
{%- endblock form_row %}
