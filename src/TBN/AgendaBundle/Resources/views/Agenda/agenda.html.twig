{% extends "TBNAgendaBundle::layout-fluid.html.twig" %}

{% block breadcrumb_agenda %}
    {% set item = menu.addItem('Agenda', path('tbn_agenda_agenda')) %}
    {% if placeName is not null %}
        {% set item = menu.addItem(placeName|capitalize, path('tbn_agenda_place', {'slug' : placeSlug})) %}
    {% elseif tag is not null %}
        {% set item = menu.addItem(tag|capitalize, path('tbn_agenda_tags', {'tag' : tag})) %}
    {% elseif type is not null %}
        {% set item = menu.addItem(type|capitalize, path('tbn_agenda_sortir', {'type' : type})) %}
    {% endif %}
    {% if page > 1 %}
        {% set item = menu.addItem("Page " ~ page, path('tbn_agenda_pagination', {'page': page})) %}
    {% endif %}
{% endblock %}


{% block titre_agenda %}
{% if villeName is not null %}Sortir à {{ villeName|capitalize }}
{% elseif placeName is not null %}Sortir à {{ placeName|capitalize }}
{% elseif tag is not null %}{{ tag|capitalize }}
{% elseif type == 'concert' %}Concerts
{% elseif type == 'famille' %}Sorties familles
{% elseif type == 'spectacle' %}Spectacles
{% elseif type == 'etudiant' %}Soirées étudiantes
{% else %}Agenda des <strong>événements</strong> {% endif %}
{% if placeName is null and villeName is null%}à <strong>{{ site.nom }}</strong>{% endif %}
{% endblock %}

{% block helper -%}
    {% include "TBNAgendaBundle:Agenda:block_criteres.html.twig" %}    
{%- endblock %}

{% block body_agenda -%}
    {% if soirees|length == 0 %}
        <div class="alert alert-info">
            <i class="fa fa-info-circle"></i>
            Aucun événement trouvé
        </div>
    {% else %}
        <h3 class="info"><span class="label label-info">{{ nbEvents }} événément{{ nbEvents > 1 ? 's' : '' }}</span></h3>
        <div class="panel panel-primary">
            <div class="panel-body">                
                {% block soirees -%}{%- endblock %}
            </div>
        </div>
    {% endif %}
{%- endblock %}

{% block widgets_agenda %}{% include "TBNAgendaBundle:MenuDroit:accueil.html.twig" %}{% endblock %}

{% block css_agenda %}
    {% stylesheets 
        'bower/bootstrap-datepicker/dist/css/bootstrap-datepicker3.css'
        'bower/bootstrap-select/dist/css/bootstrap-select.min.css'
        'bower/dropdown.js/jquery.dropdown.css'
        'bower/fancybox/source/jquery.fancybox.css'
        'bundles/tbnagenda/css/liste.css'
        output='prod/css/evenements/agenda.css'
    %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" media="screen" >
    {% endstylesheets %}
{% endblock %}

{% block head_js_agenda %}
    <meta name="include_mode" content="async" >
    <script src="//cdnjs.cloudflare.com/ajax/libs/hinclude/0.9.5/hinclude.min.js" type="text/javascript"></script>
{% endblock %}

{% block js_agenda %}
    {% javascripts 
        'bower/jquery-unveil/jquery.unveil.min.js'
        'bower/fancybox/source/jquery.fancybox.js'
        'bower/bootstrap-datepicker/dist/js/bootstrap-datepicker.js'
        'bower/bootstrap-datepicker/dist/locales/bootstrap-datepicker.fr.min.js'
        'bower/bootstrap-select/dist/js/bootstrap-select.min.js'
        'bower/dropdown.js/jquery.dropdown.js'
        'bower/bootstrap-select/js/i18n/defaults-fr_FR.js'
        'bower/jquery-unveil/jquery.unveil.min.js'
        '@TBNAgendaBundle/Resources/public/js/agenda.js'
        output='prod/js/evenements/agenda.js'
    %}
        <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}
{% endblock %}
